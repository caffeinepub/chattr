{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Replace message action buttons with context menu (right-click / long-press)",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Replace the always-visible Reply, React, and Share action buttons in MessageBubble.tsx with a context menu that opens on right-click (desktop) or long-press (~500ms, mobile). The menu must contain the same three actions with identical functionality. No other changes to any file.",
      "acceptanceCriteria": [
        "The Reply, React, and Share buttons are no longer visible by default on message bubbles",
        "Right-clicking a message bubble on desktop opens a context menu with Reply, React, and Share options",
        "Long-pressing (~500ms) a message bubble on mobile opens the same context menu",
        "Each menu action (Reply, React, Share) performs the same operation as the original buttons",
        "The context menu closes when clicking/tapping outside of it",
        "No other UI elements, styles, layouts, or behaviors are changed"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MessageBubble.tsx",
          "operation": "modify",
          "description": "Remove the always-visible Reply, React, and Share action buttons. Add state and event handlers for a context menu that opens on right-click (desktop) or long-press (~500ms touch hold, mobile). Implement the context menu UI containing Reply, React, and Share options with the same click handlers as the original buttons. Ensure the menu closes on outside click/tap. Preserve all existing functionality (reactions, pinning, replies, media embeds, voice playback, reporting, external link warnings) without modification."
        }
      ]
    }
  ]
}