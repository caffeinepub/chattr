{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Graceful UI handling for expiring chatrooms",
  "requirements": [
    {
      "id": "REQ-3",
      "summary": "Make the UI resilient to chatrooms disappearing due to backend expiry, showing the existing “Chat Not Found” state and keeping the Lobby list fresh as rooms expire.",
      "acceptanceCriteria": [
        "If a user is on a chatroom page and the backend returns null (room expired/removed), the UI shows the existing “Chat Not Found” state with a way back to the Lobby.",
        "The Lobby list updates normally as rooms expire (rooms disappear on the next refresh interval) without requiring a manual page reload."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Ensure lobby data stays current as rooms expire by adding periodic refetching to any lobby-related queries that can be active (e.g., search and category-filter queries) so expired rooms disappear without a manual reload, matching the existing refresh behavior of the base chatroom list."
        },
        {
          "path": "frontend/src/pages/ChatroomPage.tsx",
          "operation": "modify",
          "description": "Harden the expired-room flow by ensuring the existing “Chat Not Found” state is shown whenever the chatroom query refetch returns null after previously being present (no crashes, and keep the “Back to Lobby” navigation intact)."
        }
      ]
    }
  ]
}