{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Lobby initial load by isolating empty category-filter React Query cache key",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Ensure the category-filter query never uses the base ['chatrooms'] React Query key when no category is selected, preventing empty-category results from overwriting the lobby list cache.",
      "acceptanceCriteria": [
        "On first load of the Lobby page (with no selected category and empty search), the UI shows the same rooms returned by the base getChatrooms query without requiring any user interaction.",
        "No request is made to the backend category filter endpoint with an empty string category (e.g., filterChatroomsByCategory('')).",
        "The base chatroom list query cache (queryKey ['chatrooms']) is not replaced by an empty array from any disabled/empty category query.",
        "Selecting a category still filters the list as before; clearing the category still restores the base list as before.",
        "Search behavior remains unchanged."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Update useFilterChatroomsByCategory so that when category is empty/whitespace it uses a distinct, non-base queryKey (e.g., ['chatrooms','category','__none__']) while keeping the query disabled (enabled: false) to avoid any backend call with an empty category; ensure only the category-filter query key behavior changes and search/base chatroom queries remain unchanged."
        }
      ]
    }
  ]
}