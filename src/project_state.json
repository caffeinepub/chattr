{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Fix lobby room list not displaying on first load (rooms only appear after selecting a category) by using a single canonical base query and performing category/search filtering client-side to avoid React Query cached variant key selection issues.",
  "architectural_notes": [
    "Use a single canonical chatrooms query as source of truth; implement category/search as client-side (in-memory) filtering to avoid React Query cache/key collisions."
  ],
  "known_issues": [
    "Live lobby may render empty room list on first load due to selecting stale cached filtered query results; rooms appear only after choosing a category/filter."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-refactor-the-lobby-page-to-fetch-chatrooms-only-from-the-canonical-base-react-query-key-chatrooms-usegetchatrooms-and-remove-usage-of-separate-search-category-react-query-queries-for-the-lobby-view",
      "title": "Refactor the Lobby page to fetch chatrooms only from the canonical base React Query key ['chatrooms'] (useGetChatrooms) and remove usage of separate search/category React Query queries for the lobby view.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-category-and-search-filtering-purely-client-side-in-the-lobby-page-by-filtering-the-base-chatroom-array-in-memory-using-a-the-debounced-search-term-and-b-the-selected-category-state-without-creating-new-react-query-cache-keys",
      "title": "Implement category and search filtering purely client-side in the Lobby page by filtering the base chatroom array in-memory using (a) the debounced search term and (b) the selected category state, without creating new React Query cache keys.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-preserve-the-existing-recovery-loading-behavior-that-uses-useforcefreshchatroomsonactorready-isrecovering-and-ensure-the-lobby-renders-based-only-on-the-post-recovery-canonical-chatrooms-query-result-no-fallback-to-cached-filtered-arrays",
      "title": "Preserve the existing recovery/loading behavior that uses useForceFreshChatroomsOnActorReady (isRecovering) and ensure the lobby renders based only on the post-recovery canonical ['chatrooms'] query result (no fallback to cached filtered arrays).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Refactor lobby data flow to use one canonical base chatrooms query and apply category/search filters in-memory (avoid multiple React Query keys) so rooms display on first load",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Caffeine Chats",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}