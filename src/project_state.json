{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Chatroom lobby app: initial room list doesn’t display on live site until a filter is clicked due to stale-data fallback/guards overriding backend responses.",
  "architectural_notes": [
    "Lobby chatroom list fetching currently has guards that replace empty backend responses with cached/stale data (in both useGetChatrooms and LobbyPage), preventing the lobby from seeing the true initial list until a filter changes the query key."
  ],
  "known_issues": [
    "Rooms don’t display on initial lobby load unless a filter is clicked; initial backend results are being overwritten by stale cached data via guard/fallback logic (useGetChatrooms + LobbyPage)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-remove-the-lobby-level-empty-array-guard-that-replaces-an-empty-chatroom-list-with-a-previously-cached-non-empty-list-so-the-lobbypage-always-renders-the-actual-react-query-results-for-the-current-view-all-search-category",
      "title": "Remove the lobby-level “empty array guard” that replaces an empty chatroom list with a previously cached non-empty list so the LobbyPage always renders the actual React Query results for the current view (all/search/category).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-chatroom-query-level-guard-behavior-that-throws-rejects-empty-chatroom-results-e-g-transient-empty-result-rejected-so-that-empty-arrays-are-treated-as-valid-backend-responses-and-do-not-force-stale-placeholder-data-to-persist",
      "title": "Remove the chatroom-query-level guard behavior that throws/rejects empty chatroom results (e.g., “Transient empty result rejected”) so that empty arrays are treated as valid backend responses and do not force stale/placeholder data to persist.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-existing-recovery-loading-experience-for-production-persisted-cache-issues-the-actor-ready-recovery-hook-and-the-lobby-loading-gate-using-isrecovering-but-ensure-that-after-recovery-completes-the-lobby-renders-based-on-the-post-refetch-query-results-without-stale-data-substitution",
      "title": "Keep the existing recovery/loading experience for production persisted-cache issues (the actor-ready recovery hook and the lobby loading gate using isRecovering), but ensure that after recovery completes, the lobby renders based on the post-refetch query results without stale-data substitution.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [],
  "projectName": "Caffeine Chats",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}