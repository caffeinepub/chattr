{
  "kind": "build_request",
  "title": "Update lobby card timestamp to track message and reaction activity",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the backend Chatroom type to track the most recent activity time from either new messages or new reactions, and expose this timestamp for lobby sorting",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-final"
        ],
        "quotes": [
          "for the lobby card timestamp, can you do last time modified (new message, new reaction)"
        ]
      },
      "acceptanceCriteria": [
        "Chatroom records store a timestamp that updates when a new message is posted",
        "Chatroom timestamp also updates when a reaction is added to any message in that room",
        "The timestamp reflects the most recent of these two activity types"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the lobby card UI to display the last modified timestamp (most recent message or reaction activity) instead of the current timestamp",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-final"
        ],
        "quotes": [
          "for the lobby card timestamp, can you do last time modified (new message, new reaction)"
        ]
      },
      "acceptanceCriteria": [
        "Lobby cards show a timestamp that reflects when the last message was posted OR when the last reaction was added, whichever is more recent",
        "The timestamp format remains consistent with the current display style"
      ]
    }
  ],
  "constraints": [
    "Do not add caller/authorization checks during this build",
    "Do not make any additional changes beyond updating the timestamp tracking and display"
  ],
  "nonGoals": [
    "Changing the sorting algorithm or order of lobby cards",
    "Modifying any other UI elements on lobby cards",
    "Adding authentication or authorization logic",
    "Changing how reactions or messages are created"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}