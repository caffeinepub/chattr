{
  "kind": "build_request",
  "title": "Fix GIF rendering in chat messages",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-9",
      "text": "Update the message rendering logic in MessageBubble.tsx to detect when a message contains GIF data from Giphy and render it as an animated image element inline in the chat, similar to how regular images are currently displayed",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-gif-not-rendering"
        ],
        "quotes": [
          "gif selection works but its not rendering once posted, it just says the name of the gif in text",
          "the gif name in plain text"
        ]
      },
      "acceptanceCriteria": [
        "GIFs selected from the Giphy picker display as animated images in chat messages",
        "GIF rendering matches the visual style and behavior of existing image rendering",
        "GIF URLs from Giphy are properly passed through from selection to display",
        "No plain text GIF names appear in the chat - only rendered animated images"
      ]
    },
    {
      "id": "REQ-10",
      "text": "Ensure the GIF data structure from the Giphy picker includes the necessary URL information to render the animated GIF, and verify this data is properly stored and transmitted with the message",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-user-gif-not-rendering"
        ],
        "quotes": [
          "its not rendering once posted, it just says the name of the gif in text"
        ]
      },
      "acceptanceCriteria": [
        "GIF selection from Giphy picker captures the GIF URL (not just the name)",
        "Message payload includes the complete GIF URL when sending messages with GIFs",
        "Backend stores and returns the GIF URL data correctly",
        "Frontend receives the GIF URL data and can access it for rendering"
      ]
    }
  ],
  "constraints": [
    "Do not add any caller checks or authentication/permission validation for the GIF functionality",
    "Do not modify existing image rendering functionality that is working correctly",
    "Preserve all existing styles and layout code"
  ],
  "nonGoals": [
    "Changing how GIFs are selected from the Giphy picker",
    "Modifying the Giphy search or trending GIF functionality",
    "Adding new authentication or security validation"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}