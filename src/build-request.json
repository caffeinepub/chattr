{
  "kind": "build_request",
  "title": "Remove all caller principal checks from user-facing backend functions",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Remove all AccessControl.isAuthorized() calls from user-facing functions in backend/main.mo including createChatroom, sendMessage, addReaction, removeReaction, updateUsername, updateAvatar, addReply, and any other functions that regular users need to access",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "no actions are working because you added caller principal checks",
          "remove all caller principal checks from main.mo"
        ]
      },
      "acceptanceCriteria": [
        "Anonymous users can create chatrooms without authorization checks",
        "Anonymous users can send messages without authorization checks",
        "Anonymous users can add and remove reactions without authorization checks",
        "Anonymous users can update their username and avatar without authorization checks",
        "Anonymous users can add replies without authorization checks",
        "All user-facing backend functions work without requiring caller principal verification"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Preserve admin password-protected functions (deleteChatroom and any other admin-only operations) so they remain protected",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Admin functions like deleteChatroom remain password-protected",
        "Admin page continues to require password authentication"
      ]
    }
  ],
  "constraints": [
    "Do not modify any frontend files",
    "Keep admin password protection intact",
    "Maintain existing session ID system in localStorage",
    "Do not change the single-actor architecture"
  ],
  "nonGoals": [
    "Adding new features",
    "Modifying frontend components",
    "Changing the UI design",
    "Adding any form of user authentication",
    "Modifying the AccessControl module itself"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}