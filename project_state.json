{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Chat application with versioned builds. Current goal: build on top of version 348's layout (usernames, avatars, spacing preserved), add reduced message spacing, a custom context menu (right-click desktop / long-press mobile) with Copy Text option, and disable default mobile long-press behavior.",
  "architectural_notes": [
    "Version 348 is the stable baseline â€” never remove usernames, avatars, or layout from it",
    "Context menu: right-click on desktop, long-press on mobile; suppress browser default long-press"
  ],
  "known_issues": [
    "Usernames and avatars have been accidentally dropped in multiple previous builds (358 regression)"
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-preserve-all-existing-layout-from-version-348-exactly-as-is-usernames-displayed-on-messages-user-avatars-displayed-and-all-existing-spacing-and-styling-in-messagebubble-tsx-and-chatarea-tsx-must-remain-untouched-do-not-remove-or-alter-username-rendering-or-avatar-rendering-logic-under-any-circumstances",
      "title": "Preserve all existing layout from version 348 exactly as-is: usernames displayed on messages, user avatars displayed, and all existing spacing and styling in MessageBubble.tsx and ChatArea.tsx must remain untouched. Do not remove or alter username rendering or avatar rendering logic under any circumstances.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-reduce-the-vertical-spacing-between-individual-messages-in-chatarea-tsx-so-messages-appear-more-compact-decrease-the-margin-gap-between-message-bubbles",
      "title": "Reduce the vertical spacing between individual messages in ChatArea.tsx so messages appear more compact. Decrease the margin/gap between message bubbles.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-custom-context-menu-to-messagebubble-tsx-on-desktop-the-menu-is-triggered-by-right-clicking-a-message-on-mobile-it-is-triggered-by-a-long-press-approximately-500ms-hold-the-context-menu-must-include-at-least-a-copy-text-option-that-copies-the-message-text-to-the-clipboard",
      "title": "Add a custom context menu to MessageBubble.tsx. On desktop, the menu is triggered by right-clicking a message. On mobile, it is triggered by a long press (approximately 500ms hold). The context menu must include at least a 'Copy Text' option that copies the message text to the clipboard.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-disable-the-browser-s-default-long-press-behavior-on-message-bubbles-on-mobile-which-triggers-text-selection-magnifier-or-the-native-context-menu-use-css-e-g-user-select-none-webkit-touch-callout-none-and-or-javascript-e-g-preventdefault-on-contextmenu-and-touchstart-events-to-suppress-the-native-long-press-popup-so-only-the-custom-context-menu-fires",
      "title": "Disable the browser's default long-press behavior on message bubbles on mobile (which triggers text selection, magnifier, or the native context menu). Use CSS (e.g., user-select: none, -webkit-touch-callout: none) and/or JavaScript (e.g., preventDefault on contextmenu and touchstart events) to suppress the native long-press popup so only the custom context menu fires.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Preserve version 348 layout (usernames, avatars, spacing)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Reduce spacing between messages",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add custom context menu (right-click desktop, long-press mobile) with Copy Text option",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Disable default mobile long-press behavior to prevent interference with custom context menu",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Chattr",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}